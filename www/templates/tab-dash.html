<ion-view view-title="Dashboard" class="">
  <ion-content class="">
    <ion-refresher
      pulling-text="Pull to refresh..."
      on-refresh="doRefresh()">
    </ion-refresher>
    <ion-list>
      <div class="item item-divider">
        Current events
      </div>
      <ion-item
        class="item-borderless item-icon-left item-icon-right item-button-right"
        ng-repeat="activity in storage.activityList | orderBy : 'date' : 'reverse'"
        ng-if="activity.active == true">
        <i class="icon ion-ribbon-b"></i>


        <p style="white-space: normal; overflow: auto; line-height: 1em;">
          <strong>{{activity.name}}</strong><span ng-show="activity.currentEvent.nextDate != undefined"> | </span>
          <small
            am-time-ago="activity.currentEvent.date">

          </small>
          <small ng-show="activity.currentEvent.nextDate != undefined" class="">, n채sta tillf채lle 채r tidigast</small>
          <small
            ng-show="activity.currentEvent.nextDate != undefined"
            class=""
            am-time-ago="activity.currentEvent.nextDate">
          </small><span ng-show="activity.currentEvent.nextDate != undefined">.</span>
          <small ng-hide="activity.currentEvent.nextDate != undefined">Tidsgr채ns: {{activity.timeLimit}} timmar</small>
        </p>

        <progress
          ng-if="activity.currentEvent"
          style="margin: -5px 0 0 0;"
          max="{{activity.currentEvent.timeLimit * 60}}"
          value="{{activity.currentEvent.nextDate | amDifference : null : 'minutes' }}">
        </progress>


        <!--
        <p style="white-space: normal; overflow: auto; line-height: 1em; font-style: italic;">
          <small>{{activity.description}}</small>
        </p>
        -->


        <button
          ng-show="activity.currentEvent != undefined"
          class="button button-small button-assertive"
          ng-click="deleteEvent(activity.currentEvent.uuid)">
          <i class="button-icon button-small ion-close-circled"></i>
        </button>
        <button
          ng-show="activity.currentEvent == undefined"
          class="button button-small button-dark"
          ng-click="addEvent(activity)">
          <i class="button-icon button-small ion-clock"></i>
        </button>



      </ion-item>

    </ion-list>

  </ion-content>
</ion-view>
